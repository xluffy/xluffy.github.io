<!DOCTYPE html>
<html lang="en">
  <head>
    
      <title>
        Rails for DevOps engineer ::
        /home/xluffy
      </title>
    
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta
  name="description"
  content="M·ªôt s·ªë c√∫ ph√°p, best practice khi s·ª≠ d·ª•ng Active Record c∆° b·∫£n cho m·∫•y b·∫°n d√©p-·ªôp engineer."
/>
<meta
  name="keywords"
  content=""
/>
<meta name="robots" content="noodp" />
<link rel="canonical" href="https://taoquangne.com/post/rails-for-devops-engineer/" />





<link rel="stylesheet" href="https://taoquangne.com/assets/style.css" />

<link rel="stylesheet" href="https://taoquangne.com/style.css" />


<link
  rel="apple-touch-icon-precomposed"
  sizes="144x144"
  href="https://taoquangne.com/img/apple-touch-icon-144-precomposed.png"
/>
<link rel="shortcut icon" href="https://taoquangne.com/img/favicon.png" />


<link href="https://taoquangne.com/assets/fonts/Inter-Italic.woff2" rel="preload" type="font/woff2" as="font" crossorigin="">
<link href="https://taoquangne.com/assets/fonts/Inter-Regular.woff2" rel="preload" type="font/woff2" as="font" crossorigin="">
<link href="https://taoquangne.com/assets/fonts/Inter-Medium.woff2" rel="preload" type="font/woff2" as="font" crossorigin="">
<link href="https://taoquangne.com/assets/fonts/Inter-MediumItalic.woff2" rel="preload" type="font/woff2" as="font" crossorigin="">
<link href="https://taoquangne.com/assets/fonts/Inter-Bold.woff2" rel="preload" type="font/woff2" as="font" crossorigin="">
<link href="https://taoquangne.com/assets/fonts/Inter-BoldItalic.woff2" rel="preload" type="font/woff2" as="font" crossorigin="">


<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Rails for DevOps engineer"/>
<meta name="twitter:description" content="M·ªôt s·ªë c√∫ ph√°p, best practice khi s·ª≠ d·ª•ng Active Record c∆° b·∫£n cho m·∫•y b·∫°n d√©p-·ªôp engineer."/>



<meta property="og:title" content="Rails for DevOps engineer" />
<meta property="og:description" content="M·ªôt s·ªë c√∫ ph√°p, best practice khi s·ª≠ d·ª•ng Active Record c∆° b·∫£n cho m·∫•y b·∫°n d√©p-·ªôp engineer." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://taoquangne.com/post/rails-for-devops-engineer/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2018-07-25T00:00:00+00:00" />
<meta property="article:modified_time" content="2018-07-25T00:00:00+00:00" /><meta property="og:site_name" content="/home/xluffy" />







  </head>
  <body class="">
    <div class="container">
      <header class="header">
  <span class="header__inner">
    <a
  href="/"
  class="logo"
  style="text-decoration: none;"
>
  
    <span class="logo__mark"><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" viewBox="0 0 44 44">
  <path fill="none" d="M15 8l14.729 14.382L15 35.367" />
</svg>
</span>
    <span class="logo__text"
      >/home/xluffy ft üçÑ</span
    >
    <span class="logo__cursor"></span>
  
</a>

    <span class="header__right">
      
        <nav class="menu">
  <ul class="menu__inner menu__inner--desktop">
    
      
        
          <li><a href="/about">about</a></li>
        
      
        
          <li><a href="/tags">tags</a></li>
        
      
        
          <li><a href="https://github.com/xluffy/til/issues">til</a></li>
        
      
        
          <li><a href="/weekly-summary">weekly-summary</a></li>
        
      
    
  </ul>

  <ul class="menu__inner menu__inner--mobile">
    
      
        <li><a href="/about">about</a></li>
      
    
      
        <li><a href="/tags">tags</a></li>
      
    
      
        <li><a href="https://github.com/xluffy/til/issues">til</a></li>
      
    
      
        <li><a href="/weekly-summary">weekly-summary</a></li>
      
    
  </ul>
</nav>

        <span class="menu-trigger">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M0 0h24v24H0z" fill="none" />
            <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z" />
          </svg>
        </span>
      
      <span class="theme-toggle">
        <svg
  class="theme-toggler"
  width="24"
  height="24"
  viewBox="0 0 48 48"
  fill="none"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    d="M22 41C32.4934 41 41 32.4934 41 22C41 11.5066 32.4934 3 22
  3C11.5066 3 3 11.5066 3 22C3 32.4934 11.5066 41 22 41ZM7 22C7
  13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22Z"
  />
</svg>

      </span>
    </span>
  </span>
</header>


      <div class="content">
        
  
  

  <div class="post">
    <h1 class="post-title">Rails for DevOps engineer</h1>
    <div class="post-meta">
      
        <span class="post-date">
          2018-07-25
        </span>

        
          
        
      

      


      
    </div>

    
      <span class="post-tags">
        
          <a href="https://taoquangne.com/tags/rails/">#rails</a>&nbsp;
        
          <a href="https://taoquangne.com/tags/active-record/">#active-record</a>&nbsp;
        
      </span>
    

    

    <div class="post-content">
      
      <p>M·ªôt s·ªë c√∫ ph√°p, best practice khi s·ª≠ d·ª•ng Active Record c∆° b·∫£n cho m·∫•y b·∫°n d√©p-·ªôp engineer.</p>
<h2 id="1-basic-active-record">1. Basic Active Record</h2>
<h3 id="11-find">1.1 find</h3>
<p>Tham s·ªë truy·ªÅn v√†o c·ªßa <code>find</code> l√† primary-key, v√≠ d·ª• <code>User.find(1)</code> t∆∞∆°ng ƒë∆∞∆°ng v·ªõi <code>SELECT * FROM users WHERE id = 1 LIMIT 1</code></p>
<p>C≈©ng c√≥ th·ªÉ nh·∫≠n nhi·ªÅu gi√° tr·ªã ki·ªÉu <code>User.find(1, 10)</code> ho·∫∑c <code>User.find([1, 10])</code> s·∫Ω t∆∞∆°ng ƒë∆∞∆°ng v·ªõi <code>SELECT * FROM users WHERE id IN (1, 10)</code></p>
<h3 id="12-takefirstlast">1.2 take/first/last</h3>
<ul>
<li><code>take</code> tr·∫£ v·ªÅ m·ªôt ho·∫∑c nhi·ªÅu record t√πy v√†o gi√° tr·ªã truy·ªÅn v√†o nh∆∞ng KH√îNG S·∫ÆP X·∫æP</li>
<li><code>first</code> m·∫∑c ƒë·ªãnh tr·∫£ v·ªÅ m·ªôt record v√† S·∫ÆP X·∫æP GI·∫¢M D·∫¶N d·ª±a tr√™n primary key <code>ORDER BY id ASC</code>, c≈©ng c√≥ th·ªÉ tr·∫£ v·ªÅ nhi·ªÅu gi√° tr·ªã</li>
<li><code>last</code> gi·ªëng <code>first</code>, ch·ªâ kh√°c l√† s·∫Øp x·∫øp tƒÉng d·∫ßn.</li>
</ul>
<p>Theo th·ª© t·ª± active record v√† sql s·∫Ω nh∆∞ sau:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ruby" data-lang="ruby"><span style="display:flex;"><span><span style="color:#66d9ef">User</span><span style="color:#f92672">.</span>take
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">User</span><span style="color:#f92672">.</span>take(<span style="color:#ae81ff">20</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> users <span style="color:#66d9ef">LIMIT</span> <span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> users <span style="color:#66d9ef">LIMIT</span> <span style="color:#ae81ff">20</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">User</span><span style="color:#f92672">.</span>first
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">User</span><span style="color:#f92672">.</span>first(<span style="color:#ae81ff">2</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> users <span style="color:#66d9ef">ORDER</span> <span style="color:#66d9ef">BY</span> id <span style="color:#66d9ef">ASC</span> <span style="color:#66d9ef">LIMIT</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> users <span style="color:#66d9ef">ORDER</span> <span style="color:#66d9ef">BY</span> id <span style="color:#66d9ef">ASC</span> <span style="color:#66d9ef">LIMIT</span> <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">User</span><span style="color:#f92672">.</span>last
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> users <span style="color:#66d9ef">ORDER</span> <span style="color:#66d9ef">BY</span> id <span style="color:#66d9ef">DESC</span> <span style="color:#66d9ef">LIMIT</span> <span style="color:#ae81ff">1</span>
</span></span></code></pre></div><h3 id="13-find_by-v√†-wheretake">1.3 <code>find_by</code> v√† <code>where().take</code></h3>
<ul>
<li><code>find_by</code> tr·∫£ v·ªÅ m·ªôt record match v·ªõi ƒëi·ªÅu ki·ªán.</li>
<li><code>where</code> tr·∫£ v·ªÅ record theo ƒëi·ªÅu ki·ªán.</li>
</ul>
<p>V√≠ d·ª• 2 query sau s·∫Ω nh∆∞ nhau:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ruby" data-lang="ruby"><span style="display:flex;"><span><span style="color:#66d9ef">User</span><span style="color:#f92672">.</span>find_by name: <span style="color:#e6db74">&#39;Quang&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">User</span><span style="color:#f92672">.</span>where(name: <span style="color:#e6db74">&#39;Quang&#39;</span>)<span style="color:#f92672">.</span>take
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> users <span style="color:#66d9ef">WHERE</span> name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;Quang&#39;</span> <span style="color:#66d9ef">LIMIT</span> <span style="color:#ae81ff">1</span>;
</span></span></code></pre></div><h3 id="14-unscope-v√†-only">1.4 <code>unscope</code> v√† <code>only</code></h3>
<p><code>unscope</code> d√πng ƒë·ªÉ x√≥a m·ªôt s·ªë <strong>ƒëi·ªÅu ki·ªán</strong> c·ª• th·ªÉ n√†o ƒë√≥, <code>only</code> th√¨ ng∆∞·ª£c l·∫°i, ch·ªâ ƒë·ªãnh c√°c <strong>ƒëi·ªÅu ki·ªán</strong> s·∫Ω ƒë∆∞·ª£c gi·ªØ l·∫°i, v√≠ d·ª•:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ruby" data-lang="ruby"><span style="display:flex;"><span><span style="color:#66d9ef">User</span><span style="color:#f92672">.</span>where(<span style="color:#e6db74">&#34;email LIKE &#39;%@gmail%&#39;&#34;</span>)<span style="color:#f92672">.</span>order(<span style="color:#e6db74">:id</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span>  <span style="color:#e6db74">`users`</span><span style="color:#f92672">.</span>* <span style="color:#66d9ef">FROM</span> <span style="color:#e6db74">`users`</span> <span style="color:#66d9ef">WHERE</span> (email <span style="color:#66d9ef">LIKE</span> <span style="color:#e6db74">&#39;%@gmail%&#39;</span>) <span style="color:#66d9ef">ORDER</span> <span style="color:#66d9ef">BY</span> <span style="color:#e6db74">`users`</span><span style="color:#f92672">.</span>`id<span style="color:#e6db74">` ASC;
</span></span></span></code></pre></div><p>Nh∆∞ng gi·ªù m√¨nh mu·ªën x√≥a ƒëi·ªÅu ki·ªán s·∫Øp x·∫øp theo <code>id</code> th√¨ d√πng method <code>unscope</code> nh∆∞ sau:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ruby" data-lang="ruby"><span style="display:flex;"><span><span style="color:#66d9ef">User</span><span style="color:#f92672">.</span>where(<span style="color:#e6db74">&#34;email LIKE &#39;%@gmail%&#39;&#34;</span>)<span style="color:#f92672">.</span>order(<span style="color:#e6db74">:id</span>)<span style="color:#f92672">.</span>unscope(<span style="color:#e6db74">:order</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span>  <span style="color:#e6db74">`users`</span><span style="color:#f92672">.</span>* <span style="color:#66d9ef">FROM</span> <span style="color:#e6db74">`users`</span> <span style="color:#66d9ef">WHERE</span> (email <span style="color:#66d9ef">LIKE</span> <span style="color:#e6db74">&#39;%@gmail%&#39;</span>);
</span></span></code></pre></div><h2 id="2-some-active-record-tips">2. Some Active-Record tips</h2>
<h3 id="21-include-v√†-n--1-query">2.1. <code>include</code> v√† n + 1 query</h3>
<p>Gi·∫£ s·ª≠ ta c√≥ model User nh∆∞ sau:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ruby" data-lang="ruby"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">User</span>
</span></span><span style="display:flex;"><span>  has_many <span style="color:#e6db74">:posts</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">end</span>
</span></span></code></pre></div><p>=&gt; m·ªôt user c√≥ th·ªÉ c√≥ nhi·ªÅu post</p>
<p>V·ªõi c√°ch query th√¥ng th∆∞·ªùng trong active-record</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ruby" data-lang="ruby"><span style="display:flex;"><span>users <span style="color:#f92672">=</span> <span style="color:#66d9ef">User</span><span style="color:#f92672">.</span>all
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>users<span style="color:#f92672">.</span>each <span style="color:#66d9ef">do</span> <span style="color:#f92672">|</span>user<span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span>  user<span style="color:#f92672">.</span>posts
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">end</span>
</span></span></code></pre></div><p>ƒêo·∫°n tr√™n s·∫Ω generate ra n + 1 query nh∆∞ sau:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ruby" data-lang="ruby"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> users<span style="color:#f92672">.</span>* <span style="color:#66d9ef">FROM</span> users;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> posts<span style="color:#f92672">.</span>* <span style="color:#66d9ef">FROM</span> posts <span style="color:#66d9ef">WHERE</span> posts<span style="color:#f92672">.</span>user_id <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> posts<span style="color:#f92672">.</span>* <span style="color:#66d9ef">FROM</span> posts <span style="color:#66d9ef">WHERE</span> posts<span style="color:#f92672">.</span>user_id <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> posts<span style="color:#f92672">.</span>* <span style="color:#66d9ef">FROM</span> posts <span style="color:#66d9ef">WHERE</span> posts<span style="color:#f92672">.</span>user_id <span style="color:#f92672">=</span> <span style="color:#ae81ff">3</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> posts<span style="color:#f92672">.</span>* <span style="color:#66d9ef">FROM</span> posts <span style="color:#66d9ef">WHERE</span> posts<span style="color:#f92672">.</span>user_id <span style="color:#f92672">=</span> <span style="color:#ae81ff">4</span>;
</span></span><span style="display:flex;"><span><span style="color:#f92672">...</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> posts<span style="color:#f92672">.</span>* <span style="color:#66d9ef">FROM</span> posts <span style="color:#66d9ef">WHERE</span> posts<span style="color:#f92672">.</span>user_id <span style="color:#f92672">=</span> n;
</span></span></code></pre></div><p>=&gt; n·∫øu c√≥ bao nhi√™u user th√¨ generate ra b·∫±ng ƒë√≥ + 1 user n√™n g·ªçi l√† n + 1</p>
<p>N·∫øu ta d√πng <code>includes</code> th√¨ s·∫Ω ch·ªâ generate ra 2 query, 1 l√† load t·∫•t c·∫£ users v√† 1 l√† load t·∫•t c·∫£ c√°c posts li√™n quan ƒë·∫øn c√°c users ƒë√≥.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ruby" data-lang="ruby"><span style="display:flex;"><span>users <span style="color:#f92672">=</span> <span style="color:#66d9ef">User</span><span style="color:#f92672">.</span>includes(<span style="color:#e6db74">:posts</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>users<span style="color:#f92672">.</span>each <span style="color:#66d9ef">do</span> <span style="color:#f92672">|</span>user<span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span>  user<span style="color:#f92672">.</span>posts
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">end</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ruby" data-lang="ruby"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> users<span style="color:#f92672">.</span>* <span style="color:#66d9ef">FROM</span> users;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> posts<span style="color:#f92672">.</span>* <span style="color:#66d9ef">FROM</span> posts <span style="color:#66d9ef">WHERE</span> posts<span style="color:#f92672">.</span>user_id <span style="color:#66d9ef">IN</span> (<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span> <span style="color:#f92672">...</span> n);
</span></span></code></pre></div><p>Ngo√†i <code>include</code> c≈©ng c√≥ th·ªÉ s·ª≠ d·ª•ng <code>preload</code> ho·∫∑c <code>eager_load</code> ƒë·ªÉ tr√°nh n + 1 query</p>
<h3 id="22-find_each-khi-load-m·ªôt-l∆∞·ª£ng-l·ªõn-record">2.2. <code>find_each</code> khi load m·ªôt l∆∞·ª£ng l·ªõn record</h3>
<p>T∆∞∆°ng t·ª± nh∆∞ vi·ªác d√πng <code>LIMIT</code> trong SQL</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ruby" data-lang="ruby"><span style="display:flex;"><span><span style="color:#66d9ef">User</span><span style="color:#f92672">.</span>all<span style="color:#f92672">.</span>each <span style="color:#66d9ef">do</span> <span style="color:#f92672">|</span>user<span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span>  puts users
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">end</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># SQL generate</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> users<span style="color:#f92672">.</span>* <span style="color:#66d9ef">FROM</span> users;
</span></span></code></pre></div><p>Thay v√¨ load t·∫•t c·∫£ c√°c user th√¨ ta c√≥ th·ªÉ LIMIT l∆∞·ª£ng user hi·ªÉn th·ªã ra b·∫±ng c√°ch d√πng <code>find_each</code> nh∆∞ sau:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ruby" data-lang="ruby"><span style="display:flex;"><span><span style="color:#66d9ef">User</span><span style="color:#f92672">.</span>all<span style="color:#f92672">.</span>find_each(<span style="color:#e6db74">batch_size</span>: <span style="color:#ae81ff">100</span>) <span style="color:#66d9ef">do</span> <span style="color:#f92672">|</span>u<span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span>  puts u
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">end</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># SQL query</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> users<span style="color:#f92672">.</span>* <span style="color:#66d9ef">FROM</span> users <span style="color:#66d9ef">ORDER</span> <span style="color:#66d9ef">BY</span> users<span style="color:#f92672">.</span>id <span style="color:#66d9ef">ASC</span> <span style="color:#66d9ef">LIMIT</span> <span style="color:#ae81ff">100</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> users<span style="color:#f92672">.</span>* <span style="color:#66d9ef">FROM</span> users <span style="color:#66d9ef">WHERE</span> users<span style="color:#f92672">.</span>id <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">100</span> <span style="color:#66d9ef">ORDER</span> <span style="color:#66d9ef">BY</span> users<span style="color:#f92672">.</span>id <span style="color:#66d9ef">ASC</span> <span style="color:#66d9ef">LIMIT</span> <span style="color:#ae81ff">100</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> users<span style="color:#f92672">.</span>* <span style="color:#66d9ef">FROM</span> users <span style="color:#66d9ef">WHERE</span> users<span style="color:#f92672">.</span>id <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">200</span> <span style="color:#66d9ef">ORDER</span> <span style="color:#66d9ef">BY</span> users<span style="color:#f92672">.</span>id <span style="color:#66d9ef">ASC</span> <span style="color:#66d9ef">LIMIT</span> <span style="color:#ae81ff">100</span>;
</span></span><span style="display:flex;"><span><span style="color:#f92672">...</span>
</span></span></code></pre></div><p>Ch√∫ √Ω l√† c√°c query sau s·∫Ω c√≥ th√™m ƒëi·ªÅu ki·ªán <code>users.id &gt; batch_size</code></p>
<h3 id="23-ch·ªâ-l·∫•y-field-c·∫ßn-v·ªõi-pluck-ho·∫∑c-select">2.3. Ch·ªâ l·∫•y field c·∫ßn v·ªõi <code>pluck</code> ho·∫∑c <code>select</code></h3>
<p>T∆∞∆°ng t·ª± trong SQL, kh√¥ng ph·∫£i l√∫c n√†o ta c≈©ng c·∫ßn t·∫•t c·∫£ thu·ªôc t√≠nh c·ªßa model, thay v√¨:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> users;
</span></span></code></pre></div><p>Ta ch·ªâ l·∫•y c√°c thu·ªôc t√≠nh c·∫ßn thi·∫øt b·∫±ng c√¢u query:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> email <span style="color:#66d9ef">FROM</span> users;
</span></span></code></pre></div><p>Trong active-record th√¨ thay v√¨ d√πng</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ruby" data-lang="ruby"><span style="display:flex;"><span>user_emails <span style="color:#f92672">=</span> <span style="color:#66d9ef">User</span><span style="color:#f92672">.</span>where(<span style="color:#e6db74">status</span>: <span style="color:#e6db74">&#34;active&#34;</span>)<span style="color:#f92672">.</span>map(<span style="color:#f92672">&amp;</span><span style="color:#e6db74">:email</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># SELECT * FROM users;</span>
</span></span></code></pre></div><p>Ta s·∫Ω ch·ªâ l·∫•y thu·ªôc t√≠nh email c·ªßa user nh∆∞ sau:</p>
<pre tabindex="0"><code>user_emails = User.where(status: &#34;active&#34;).pluck(:email)
# SELECT users.email FROM users;
</code></pre><p>Ho·∫∑c x√†i <code>select</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ruby" data-lang="ruby"><span style="display:flex;"><span><span style="color:#66d9ef">User</span><span style="color:#f92672">.</span>select(<span style="color:#e6db74">:name</span>)
</span></span><span style="display:flex;"><span><span style="color:#f92672">or</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">User</span><span style="color:#f92672">.</span>select(<span style="color:#e6db74">&#34;name&#34;</span>)
</span></span></code></pre></div><h3 id="24-ki·ªÉm-tra-s·ª±-t·ªìn-t·∫°i-c·ªßa-d·ªØ-li·ªáu-v·ªõi-exist-thay-v√¨-present">2.4. Ki·ªÉm tra s·ª± t·ªìn t·∫°i c·ªßa d·ªØ li·ªáu v·ªõi <code>exist?</code> thay v√¨ <code>present?</code></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ruby" data-lang="ruby"><span style="display:flex;"><span><span style="color:#66d9ef">if</span> <span style="color:#66d9ef">User</span><span style="color:#f92672">.</span>where(<span style="color:#e6db74">email</span>: <span style="color:#e6db74">&#34;a@bc.d&#34;</span>)<span style="color:#f92672">.</span>present?
</span></span><span style="display:flex;"><span>  puts <span style="color:#e6db74">&#34;There is a user with email address a@bc.d&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">else</span>
</span></span><span style="display:flex;"><span>  puts <span style="color:#e6db74">&#34;There is no user with email address a@bc.d&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">end</span>
</span></span></code></pre></div><p>C√¢u query SQL s·∫Ω generate th√†nh:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> users <span style="color:#66d9ef">WHERE</span> email <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;a@bc.d&#39;</span>;
</span></span></code></pre></div><p>C√¢u query tr√™n s·∫Ω l√£ng ph√≠ b·ªüi v√≠ ta kh√¥ng c·∫ßn load h·∫øt thu·ªôc t√≠nh c·ªßa user ƒë·ªÉ ki·ªÉm tra user v·ªõi email ƒë√≥ c√≥ t·ªìn t·∫°i hay kh√¥ng. Thay v√†o ƒë√≥ c√≥ th·ªÉ d√πng nh∆∞ sau:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ruby" data-lang="ruby"><span style="display:flex;"><span><span style="color:#66d9ef">if</span> <span style="color:#66d9ef">User</span><span style="color:#f92672">.</span>where(<span style="color:#e6db74">email</span>: <span style="color:#e6db74">&#34;a@bc.d&#34;</span>)<span style="color:#f92672">.</span>exist?
</span></span><span style="display:flex;"><span>  puts <span style="color:#e6db74">&#34;There is a user with email address a@bc.d&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">else</span>
</span></span><span style="display:flex;"><span>  puts <span style="color:#e6db74">&#34;There is no user with email address a@bc.d&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">end</span>
</span></span></code></pre></div><p>Query SQL s·∫Ω th√†nh:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#ae81ff">1</span> <span style="color:#66d9ef">FROM</span> users <span style="color:#66d9ef">WHERE</span> email <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;a@bc.d&#39;</span> <span style="color:#66d9ef">LIMIT</span> <span style="color:#ae81ff">1</span>;
</span></span></code></pre></div><p>K·∫øt qu·∫£ ch·ªâ tr·∫£ v·ªÅ 1 record v√† kh√¥ng bao g·ªìm b·∫•t k·ª≥ thu·ªôc t√≠nh n√†o.</p>
<h3 id="25-bulk">2.5 Bulk</h3>
<p>V√≠ d·ª• ta ph·∫£i INSERT/UPDATE/DELETE m·ªôt l∆∞·ª£ng l·ªõn d·ªØ li·ªáu, th√¨ bulk INSERT/UPDATE/DELETE s·∫Ω nhanh h∆°n l√† thao t√°c v·ªõi t·ª´ng record d·ªØ li·ªáu.</p>
<p>V√≠ d·ª• v·ªõi t·∫°o d·ªØ li·ªáu:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ruby" data-lang="ruby"><span style="display:flex;"><span>new_users <span style="color:#f92672">=</span> <span style="color:#f92672">[</span>
</span></span><span style="display:flex;"><span>  {name: <span style="color:#e6db74">&#34;A&#34;</span>, <span style="color:#e6db74">email</span>: <span style="color:#e6db74">&#34;a@bc.d&#34;</span>},
</span></span><span style="display:flex;"><span>  {name: <span style="color:#e6db74">&#34;B&#34;</span>, <span style="color:#e6db74">email</span>: <span style="color:#e6db74">&#34;b@bc.d&#34;</span>},
</span></span><span style="display:flex;"><span>  {name: <span style="color:#e6db74">&#34;C&#34;</span>, <span style="color:#e6db74">email</span>: <span style="color:#e6db74">&#34;c@bc.d&#34;</span> },
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">...</span>
</span></span><span style="display:flex;"><span>  {name: <span style="color:#e6db74">&#34;Z&#34;</span>, <span style="color:#e6db74">email</span>: <span style="color:#e6db74">&#34;z@bc.d&#34;</span> },
</span></span><span style="display:flex;"><span><span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>new_users<span style="color:#f92672">.</span>each <span style="color:#66d9ef">do</span> <span style="color:#f92672">|</span>u<span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">User</span><span style="color:#f92672">.</span>create(u)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">end</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">-----------------------------------------</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">INTO</span> users <span style="color:#66d9ef">VALUES</span> (<span style="color:#e6db74">&#34;A&#34;</span>, <span style="color:#e6db74">&#34;a@bc.d&#34;</span>);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">INTO</span> users <span style="color:#66d9ef">VALUES</span> (<span style="color:#e6db74">&#34;B&#34;</span>, <span style="color:#e6db74">&#34;b@bc.d&#34;</span>);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">INTO</span> users <span style="color:#66d9ef">VALUES</span> (<span style="color:#e6db74">&#34;C&#34;</span>, <span style="color:#e6db74">&#34;c@bc.d&#34;</span>);
</span></span><span style="display:flex;"><span><span style="color:#f92672">...</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">INTO</span> users <span style="color:#66d9ef">VALUES</span> (<span style="color:#e6db74">&#34;Z&#34;</span>, <span style="color:#e6db74">&#34;z@bc.d&#34;</span>);
</span></span></code></pre></div><p>Ta c√≥ th·ªÉ bulk INSERT b·∫±ng c√°ch:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ruby" data-lang="ruby"><span style="display:flex;"><span><span style="color:#66d9ef">User</span><span style="color:#f92672">.</span>create(new_users)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">-------------------------------------------------------------------------------------------</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">INTO</span> users <span style="color:#66d9ef">VALUES</span> (<span style="color:#e6db74">&#34;A&#34;</span>, <span style="color:#e6db74">&#34;a@bc.d&#34;</span>), (<span style="color:#e6db74">&#34;B&#34;</span>, <span style="color:#e6db74">&#34;b@bc.d&#34;</span>), (<span style="color:#e6db74">&#34;C&#34;</span>, <span style="color:#e6db74">&#34;c@bc.d&#34;</span>), (<span style="color:#e6db74">&#34;Z&#34;</span>, <span style="color:#e6db74">&#34;z@bc.d&#34;</span>);
</span></span></code></pre></div><p>V√≠ d·ª• v·ªõi c·∫≠p nh·∫≠t d·ªØ li·ªáu:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ruby" data-lang="ruby"><span style="display:flex;"><span>update_users <span style="color:#f92672">=</span> <span style="color:#66d9ef">User</span><span style="color:#f92672">.</span>where(<span style="color:#e6db74">user_status</span>: <span style="color:#66d9ef">nil</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>update_users<span style="color:#f92672">.</span>each <span style="color:#66d9ef">do</span> <span style="color:#f92672">|</span>u<span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span>  u<span style="color:#f92672">.</span>updute(<span style="color:#e6db74">user_status</span>: <span style="color:#e6db74">&#34;new_user&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">end</span>
</span></span></code></pre></div><p>Ta c√≥ th·ªÉ bulk UPDATE b·∫±ng c√°ch:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ruby" data-lang="ruby"><span style="display:flex;"><span>update_users <span style="color:#f92672">=</span> <span style="color:#66d9ef">User</span><span style="color:#f92672">.</span>where(<span style="color:#e6db74">user_status</span>: <span style="color:#66d9ef">nil</span>)
</span></span><span style="display:flex;"><span>update_users<span style="color:#f92672">.</span>update_all(<span style="color:#e6db74">user_status</span>: <span style="color:#e6db74">&#34;new_user&#34;</span>)
</span></span></code></pre></div><p>V√≠ d·ª• v·ªõi x√≥a d·ªØ li·ªáu:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ruby" data-lang="ruby"><span style="display:flex;"><span>banned_users <span style="color:#f92672">=</span> <span style="color:#66d9ef">User</span><span style="color:#f92672">.</span>where(<span style="color:#e6db74">user_status</span>: <span style="color:#e6db74">&#34;banned&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>banned_users<span style="color:#f92672">.</span>each <span style="color:#66d9ef">do</span> <span style="color:#f92672">|</span>u<span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span>  u<span style="color:#f92672">.</span>destroy
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">end</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">-------------------------------------------------------</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> users <span style="color:#66d9ef">WHERE</span> users<span style="color:#f92672">.</span>user_status <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;banned&#34;</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">DELETE</span> <span style="color:#66d9ef">FROM</span> users <span style="color:#66d9ef">WHERE</span> id <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">DELETE</span> <span style="color:#66d9ef">FROM</span> users <span style="color:#66d9ef">WHERE</span> id <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">DELETE</span> <span style="color:#66d9ef">FROM</span> users <span style="color:#66d9ef">WHERE</span> id <span style="color:#f92672">=</span> <span style="color:#ae81ff">3</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">DELETE</span> <span style="color:#66d9ef">FROM</span> users <span style="color:#66d9ef">WHERE</span> id <span style="color:#f92672">=</span> <span style="color:#ae81ff">4</span>;
</span></span></code></pre></div><p>=&gt; L·∫•y t·∫•t c·∫£ c√°c user c·∫ßn DELETE sau ƒë√≥ sinh ra n query DELETE t·ª´ng user d·ª±a tr√™n id c·ªßa user. Thay v√¨ v·∫≠y ta c√≥ th·ªÉ x√†i bulk DELETE nh∆∞ sau</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ruby" data-lang="ruby"><span style="display:flex;"><span>banned_users <span style="color:#f92672">=</span> <span style="color:#66d9ef">User</span><span style="color:#f92672">.</span>where(<span style="color:#e6db74">user_status</span>: <span style="color:#e6db74">&#34;banned&#34;</span>)
</span></span><span style="display:flex;"><span>banned_users<span style="color:#f92672">.</span>delete_all
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">-----------------------------------------------------</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">DELETE</span> <span style="color:#66d9ef">FROM</span> users <span style="color:#66d9ef">WHERE</span> users<span style="color:#f92672">.</span>user_status <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;banned&#34;</span>;
</span></span></code></pre></div><h3 id="26-map-vs-select">2.6. Map vs Select</h3>
<p>K·∫øt qu·∫£ tr·∫£ v·ªÅ c·ªßa <code>map</code> s·∫Ω l√† m·ªôt m·∫£ng b·∫±ng m·∫£ng ƒë·∫ßu v√†o, k·∫øt qu·∫£ c·ªßa <code>map</code> l√† m·∫£ng ch·ª©a k·∫øt qu·∫£ c·ªßa t·ª´ng ph·∫ßn t·ª≠ ƒë·ªëi chi·∫øu v·ªõi ƒëi·ªÅu ki·ªán trong block.</p>
<p><code>select</code> ch·ªâ tr·∫£ v·ªÅ c√°c k·∫øt qu·∫£ th·ªèa m√£n v·ªõi ƒëi·ªÅu ki·ªán trong block, <code>select</code> c√≥ th·ªÉ xem nh∆∞ <code>map</code> + <code>compact</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ruby" data-lang="ruby"><span style="display:flex;"><span><span style="color:#f92672">&gt;</span> an_array <span style="color:#f92672">=</span> <span style="color:#f92672">[</span><span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">5</span><span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&gt;</span> m_array <span style="color:#f92672">=</span> an_array<span style="color:#f92672">.</span>map { <span style="color:#f92672">|</span>e<span style="color:#f92672">|</span> e <span style="color:#66d9ef">if</span> e<span style="color:#f92672">.</span>even? }
</span></span><span style="display:flex;"><span><span style="color:#f92672">=&gt;</span> <span style="color:#f92672">[</span><span style="color:#ae81ff">0</span>, <span style="color:#66d9ef">nil</span>, <span style="color:#ae81ff">2</span>, <span style="color:#66d9ef">nil</span>, <span style="color:#ae81ff">4</span>, <span style="color:#66d9ef">nil</span><span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&gt;</span> m_array<span style="color:#f92672">.</span>compact
</span></span><span style="display:flex;"><span><span style="color:#f92672">=&gt;</span> <span style="color:#f92672">[</span><span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">4</span><span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&gt;</span> s_array <span style="color:#f92672">=</span> an_array<span style="color:#f92672">.</span>select { <span style="color:#f92672">|</span>e<span style="color:#f92672">|</span> e <span style="color:#66d9ef">if</span> e<span style="color:#f92672">.</span>even? }
</span></span><span style="display:flex;"><span><span style="color:#f92672">=&gt;</span> <span style="color:#f92672">[</span><span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">4</span><span style="color:#f92672">]</span>
</span></span></code></pre></div><h2 id="3-other">3. Other</h2>
<h3 id="31-">3.1. <code>||=</code></h3>
<p>V√≠ d·ª• <code>x ||= y</code> c√≥ nghƒ©a l√† <code>x || x = y</code>. N·∫øu <code>x = nil</code> ho·∫∑c <code>x = false</code> g√°n <code>x = y</code></p>
<h2 id="4-ref">4. Ref</h2>
<ul>
<li><a href="https://medium.com/@User3141592/active-record-query-performance-tips-a3c3947b968">https://medium.com/@User3141592/active-record-query-performance-tips-a3c3947b968</a></li>
<li><a href="https://www.netguru.co/codestories/activerecord-tips-2">https://www.netguru.co/codestories/activerecord-tips-2</a></li>
</ul>

    </div>
    
      
        <div class="pagination">
          <div class="pagination__title">
            <span class="pagination__title-h"
              >Read other posts</span
            >
            <hr />
          </div>
          <div class="pagination__buttons">
            
              <span class="button previous">
                <a href="https://taoquangne.com/post/sidekiq-how-to-reliability/">
                  <span class="button__icon">‚Üê</span>
                  <span class="button__text">Sidekiq, how to reliability?</span>
                </a>
              </span>
            
            
              <span class="button next">
                <a href="https://taoquangne.com/post/how-to-setup-our-networking/">
                  <span class="button__text">Setup h·ªá th·ªëng m·∫°ng cho cty v·ª´a v√† nh·ªè</span>
                  <span class="button__icon">‚Üí</span>
                </a>
              </span>
            
          </div>
        </div>
      
    

    
      
        

      
    
  </div>

      </div>

      
        <footer class="footer">
  <div class="footer__inner">
    
      <div class="copyright copyright--user"><span> h√†ng nh√† tr·ªìng üå¥ theo <a href="https://creativecommons.org/licenses/by-nc/4.0">gi·∫•y ph√©p CC BY-NC 4.0</a></span><span>Themes created by <a href="https://twitter.com/panr" target="_blank" rel="noopener">panr</a></span></div>
      
  </div>
</footer>

<script src="https://taoquangne.com/assets/main.js"></script>
<script src="https://taoquangne.com/assets/prism.js"></script>


      
    </div>

    
  </body>
</html>
